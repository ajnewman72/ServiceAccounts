<?xml version="1.0" encoding="UTF-8"?><record_update table="sys_transform_entry">
    <sys_transform_entry action="INSERT_OR_UPDATE">
        <choice_action>reject</choice_action>
        <coalesce>true</coalesce>
        <coalesce_case_sensitive>false</coalesce_case_sensitive>
        <coalesce_empty_fields>false</coalesce_empty_fields>
        <date_format>yyyy-MM-dd HH:mm:ss</date_format>
        <map display_value="lloy_serviceaccountpermission_tmap">e346ce2a93c69610879df0e48aba108c</map>
        <reference_value_field>account_name</reference_value_field>
        <source_field>[Script]</source_field>
        <source_script><![CDATA[answer = (function transformEntry(source) {

    // Get the value from the source field
    var inscopeAccount = source.u_inscope_accounts;

    // Check if the inscopeAccount field is defined and not null
    if (inscopeAccount) {
        // Query the x_llol_service_acc_records table for a matching record
        var accRecordGR = new GlideRecord('x_llol_service_acc_records');
        accRecordGR.addQuery('account_name', inscopeAccount);
        accRecordGR.query();

        // If a matching record is found, set the parent_service_account field
        if (accRecordGR.next()) {
            //map.coalesce = true;
            return accRecordGR.sys_id;
        } else {
            // Handle the case where no matching record is found
            gs.info('No matching record found in x_llol_service_acc_records for: ' + inscopeAccount);
            return;
        }

    } else {
        // Handle the case where the inscopeAccount field is undefined or null
        gs.info('Inscope accounts field is undefined or null');
        return;
    }

})(source);]]></source_script>
        <source_table>x_llol_service_acc_lloy_serviceaccountpermission_impset</source_table>
        <sys_class_name>sys_transform_entry</sys_class_name>
        <sys_created_by>sup_newmanan</sys_created_by>
        <sys_created_on>2024-11-26 14:57:58</sys_created_on>
        <sys_id>50c6c2aa93c69610879df0e48aba1094</sys_id>
        <sys_mod_count>10</sys_mod_count>
        <sys_name>[Script]</sys_name>
        <sys_package display_value="Service Accounts" source="x_llol_service_acc">cfccdb1293281a10879df0e48aba10ef</sys_package>
        <sys_policy/>
        <sys_scope display_value="Service Accounts">cfccdb1293281a10879df0e48aba10ef</sys_scope>
        <sys_update_name>sys_transform_entry_50c6c2aa93c69610879df0e48aba1094</sys_update_name>
        <sys_updated_by>sup_newmanan</sys_updated_by>
        <sys_updated_on>2024-11-28 13:55:23</sys_updated_on>
        <target_field>parent_service_account</target_field>
        <target_table>x_llol_service_acc_permissions</target_table>
        <use_source_script>true</use_source_script>
    </sys_transform_entry>
    <sys_es_latest_script action="INSERT_OR_UPDATE">
        <id>50c6c2aa93c69610879df0e48aba1094</id>
        <sys_created_by>sup_newmanan</sys_created_by>
        <sys_created_on>2024-11-26 15:03:54</sys_created_on>
        <sys_id>cf184aea93c69610879df0e48aba10a7</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>sup_newmanan</sys_updated_by>
        <sys_updated_on>2024-11-26 15:03:54</sys_updated_on>
        <table>sys_transform_entry</table>
        <use_es_latest>true</use_es_latest>
    </sys_es_latest_script>
</record_update>
